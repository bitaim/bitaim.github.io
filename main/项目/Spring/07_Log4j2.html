<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Log4j2 | 山  海</title>
    <meta name="description" content="">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.032ce348.css" as="style"><link rel="preload" href="/assets/js/app.daf90e44.js" as="script"><link rel="preload" href="/assets/js/2.5c2f89f7.js" as="script"><link rel="preload" href="/assets/js/39.10b0f4fe.js" as="script"><link rel="prefetch" href="/assets/js/10.060e2bf0.js"><link rel="prefetch" href="/assets/js/11.2c1e7667.js"><link rel="prefetch" href="/assets/js/12.e4112fb1.js"><link rel="prefetch" href="/assets/js/13.c48f2af3.js"><link rel="prefetch" href="/assets/js/14.4c74936a.js"><link rel="prefetch" href="/assets/js/15.dde0f892.js"><link rel="prefetch" href="/assets/js/16.04fdeec3.js"><link rel="prefetch" href="/assets/js/17.50a51165.js"><link rel="prefetch" href="/assets/js/18.8ae9a823.js"><link rel="prefetch" href="/assets/js/19.ccac1f50.js"><link rel="prefetch" href="/assets/js/20.dc3b4da0.js"><link rel="prefetch" href="/assets/js/21.537f2917.js"><link rel="prefetch" href="/assets/js/22.fa0e5570.js"><link rel="prefetch" href="/assets/js/23.dbc6b9de.js"><link rel="prefetch" href="/assets/js/24.86da2a97.js"><link rel="prefetch" href="/assets/js/25.8db6665f.js"><link rel="prefetch" href="/assets/js/26.7ff0ce90.js"><link rel="prefetch" href="/assets/js/27.498e5d1f.js"><link rel="prefetch" href="/assets/js/28.c7a49776.js"><link rel="prefetch" href="/assets/js/29.3f057de0.js"><link rel="prefetch" href="/assets/js/3.b7af9e84.js"><link rel="prefetch" href="/assets/js/30.15140778.js"><link rel="prefetch" href="/assets/js/31.e91d7705.js"><link rel="prefetch" href="/assets/js/32.e8b9f267.js"><link rel="prefetch" href="/assets/js/33.9d40e450.js"><link rel="prefetch" href="/assets/js/34.7c76fee5.js"><link rel="prefetch" href="/assets/js/35.893bc59e.js"><link rel="prefetch" href="/assets/js/36.13ad14c2.js"><link rel="prefetch" href="/assets/js/37.7b7d3440.js"><link rel="prefetch" href="/assets/js/38.93ac778e.js"><link rel="prefetch" href="/assets/js/4.11dd4e91.js"><link rel="prefetch" href="/assets/js/40.464abc1f.js"><link rel="prefetch" href="/assets/js/41.29e1fdca.js"><link rel="prefetch" href="/assets/js/42.415177f1.js"><link rel="prefetch" href="/assets/js/43.422cbd1e.js"><link rel="prefetch" href="/assets/js/44.f9780e88.js"><link rel="prefetch" href="/assets/js/45.2731c44f.js"><link rel="prefetch" href="/assets/js/46.eb287d68.js"><link rel="prefetch" href="/assets/js/47.a3668e5f.js"><link rel="prefetch" href="/assets/js/48.892840a4.js"><link rel="prefetch" href="/assets/js/49.b7d6cbaf.js"><link rel="prefetch" href="/assets/js/5.e02fc35f.js"><link rel="prefetch" href="/assets/js/50.06cadfd1.js"><link rel="prefetch" href="/assets/js/51.40d31a4d.js"><link rel="prefetch" href="/assets/js/52.33a7f0cc.js"><link rel="prefetch" href="/assets/js/53.13a99099.js"><link rel="prefetch" href="/assets/js/54.d6a76531.js"><link rel="prefetch" href="/assets/js/55.d31ae64c.js"><link rel="prefetch" href="/assets/js/56.805fbd61.js"><link rel="prefetch" href="/assets/js/57.b457ef1b.js"><link rel="prefetch" href="/assets/js/58.372ee965.js"><link rel="prefetch" href="/assets/js/59.3ef115d3.js"><link rel="prefetch" href="/assets/js/6.41be9e56.js"><link rel="prefetch" href="/assets/js/60.87fd023f.js"><link rel="prefetch" href="/assets/js/61.86290fe0.js"><link rel="prefetch" href="/assets/js/62.5f84a20b.js"><link rel="prefetch" href="/assets/js/63.7baf0019.js"><link rel="prefetch" href="/assets/js/7.96ae93e8.js"><link rel="prefetch" href="/assets/js/8.30d5150e.js"><link rel="prefetch" href="/assets/js/9.04db00b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.032ce348.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">山  海</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/main/项目/" class="nav-link">导航栏</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/main/项目/" class="nav-link">导航栏</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/main/项目/Spring/01_配置类.html" class="sidebar-link">配置类</a></li><li><a href="/main/项目/Spring/02_单元测试.html" class="sidebar-link">单元测试</a></li><li><a href="/main/项目/Spring/03_切面.html" class="sidebar-link">切面</a></li><li><a href="/main/项目/Spring/04_参数校验.html" class="sidebar-link">参数校验</a></li><li><a href="/main/项目/Spring/05_自定义Spring Starter.html" class="sidebar-link">自定义Spring Starter</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="log4j2"><a href="#log4j2" class="header-anchor">#</a> Log4j2</h1> <p>  Log4j2是Spring最常用的日志框架，性能高。自从爆出Log4j2的漏洞以来，请使用<strong>2.17.1及以上的最新版本</strong>。其对应的<code>starter</code>依赖版本为2.6.3。</p> <h4 id="引入依赖"><a href="#引入依赖" class="header-anchor">#</a> 引入依赖</h4> <div class="language-pom extra-class"><pre class="language-text"><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;!-- 排除web依赖中的默认日志组件 --&gt;
        &lt;exclusions&gt;
            &lt;exclusion&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
            &lt;/exclusion&gt;
        &lt;/exclusions&gt;
    &lt;/dependency&gt;
    &lt;!-- Log4j2 日志组件 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;
        &lt;version&gt;2.6.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 使Log4j2支持异步日志 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.lmax&lt;/groupId&gt;
        &lt;artifactId&gt;disruptor&lt;/artifactId&gt;
        &lt;version&gt;3.4.2&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre></div><h4 id="xml配置文件"><a href="#xml配置文件" class="header-anchor">#</a> XML配置文件</h4> <p>  将配置文件放入resources目录下即可，Spring会自动加载名为<code>log4j2.xml</code>的配置文件。</p> <p>  日志输出目录按照如下配置。在本地IDEA启动时，会在项目同级目录下生成logs文件夹。部署jar在服务器时，会在jar包同级目录下生成logs文件夹。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token comment">&lt;!-- Configuration标签的status属性，是对本身框架的日志级别进行设置，设置成trace时，你会看到log4j2内部各种详细输出，通常为OFF关闭即可）--&gt;</span>
<span class="token comment">&lt;!-- Configuration标签的monitorInterval属性，可以用来检测日志配置的变更--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>OFF<span class="token punctuation">&quot;</span></span> <span class="token attr-name">monitorInterval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 维护全局变量 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>LOG_LEVEL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 日志输出目录 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>LOG_PATH<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>logs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 日志名称 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>LOG_NAME<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>user-service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 日志输出格式 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>LOG_PATTERN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level [%logger{50}:%L] - %msg%n<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Appenders</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 日志输出到控制台 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Console</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Console<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>SYSTEM_OUT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATTERN}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Console</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- 日志输出到文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RollingRandomAccessFile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/info/${LOG_NAME}.log<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">filePattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/info/${LOG_NAME}.%d{yyyy-MM-dd HH-mm}.%i.log<span class="token punctuation">&quot;</span></span> <span class="token attr-name">append</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATTERN}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- 接收info及以上级别的日志，其他日志级别的日志信息被拒绝，比如debug --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThresholdFilter</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onMatch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ACCEPT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onMismatch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>DENY<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Policies</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 与RollingFile标签的filePattern属性时间单位相同，这里就是按1分钟的间隔执行一次滚动策略 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TimeBasedTriggeringPolicy</span> <span class="token attr-name">interval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token comment">&lt;!-- 日志文件大于10MB，创建下一个日志文件 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SizeBasedTriggeringPolicy</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>10MB<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Policies</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 滚动策略 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DefaultRolloverStrategy</span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 删除策略 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Delete</span> <span class="token attr-name">basePath</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/info/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxDepth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfFileName</span> <span class="token attr-name">glob</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>*.log<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfLastModified</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>5m<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Delete</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DefaultRolloverStrategy</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RollingRandomAccessFile</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RollingRandomAccessFile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/error/${LOG_NAME}.log<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">filePattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/error/${LOG_NAME}.%d{yyyy-MM-dd HH-mm}.%i.log<span class="token punctuation">&quot;</span></span> <span class="token attr-name">append</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATTERN}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- 接收info及以上级别的日志，其他日志级别的日志信息被拒绝，比如debug --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThresholdFilter</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onMatch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ACCEPT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onMismatch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>DENY<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Policies</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 与RollingFile标签的filePattern属性时间单位相同，这里就是按1分钟的间隔执行一次滚动策略 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TimeBasedTriggeringPolicy</span> <span class="token attr-name">interval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token comment">&lt;!-- 日志文件大于10MB，创建下一个日志文件 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SizeBasedTriggeringPolicy</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>10MB<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Policies</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 滚动策略 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DefaultRolloverStrategy</span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 删除策略 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Delete</span> <span class="token attr-name">basePath</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_PATH}/error/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxDepth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfFileName</span> <span class="token attr-name">glob</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>*.log<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IfLastModified</span> <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>5m<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Delete</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DefaultRolloverStrategy</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RollingRandomAccessFile</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Appenders</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loggers</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 根目录日志级别全局设置，并输出到控制台和info文件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${LOG_LEVEL}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Console<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Root</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 其他一些框架比如spring、mybatis一些无用日志可以单独设置日志级别来限制输出 --&gt;</span>
        <span class="token comment">&lt;!-- additivity=&quot;false&quot;就不会将日志重复输出到root中 --&gt;</span>
        <span class="token comment">&lt;!-- 其他目录可以单独设置 --&gt;</span>
        <span class="token comment">&lt;!-- 日志组件，指定包路径，日志级别，输出位置 --&gt;</span>
        <span class="token comment">&lt;!--        &lt;AsyncLogger name=&quot;com&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;appender-ref ref=&quot;Console&quot;/&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;appender-ref ref=&quot;info&quot;/&gt;--&gt;</span>
        <span class="token comment">&lt;!--        &lt;/AsyncLogger&gt;--&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loggers</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.daf90e44.js" defer></script><script src="/assets/js/2.5c2f89f7.js" defer></script><script src="/assets/js/39.10b0f4fe.js" defer></script>
  </body>
</html>
